
(function($,originalAnimateMethod,originalStopMethod){var cssTransitionProperties=["top","right","bottom","left","opacity","height","width"],directions=["top","right","bottom","left"],cssPrefixes=["","-webkit-","-moz-","-o-"],pluginOptions=["avoidTransforms","useTranslate3d","leaveTransforms"],rfxnum=/^([+-]=)?([\d+-.]+)(.*)$/,rupper=/([A-Z])/g,defaultEnhanceData={secondary:{},meta:{top:0,right:0,bottom:0,left:0}},DATA_KEY='jQe';var thisBody=document.body||document.documentElement,thisStyle=thisBody.style,transitionEndEvent=(thisStyle.WebkitTransition!==undefined)?"webkitTransitionEnd":(thisStyle.OTransition!==undefined)?"oTransitionEnd":"transitionend",cssTransitionsSupported=thisStyle.WebkitTransition!==undefined||thisStyle.MozTransition!==undefined||thisStyle.OTransition!==undefined||thisStyle.transition!==undefined,has3D=('WebKitCSSMatrix'in window&&'m11'in new WebKitCSSMatrix());function _interpretValue(e,val,prop,isTransform){var parts=rfxnum.exec(val),start=e.css(prop)==="auto"?0:e.css(prop),cleanCSSStart=typeof start=="string"?_cleanValue(start):start,cleanTarget=typeof val=="string"?_cleanValue(val):val,cleanStart=isTransform===true?0:cleanCSSStart,hidden=e.is(":hidden"),translation=e.translation();if(prop=="left")cleanStart=parseInt(cleanCSSStart,10)+translation.x;if(prop=="top")cleanStart=parseInt(cleanCSSStart,10)+translation.y;if(!parts&&val=="show"){cleanStart=1;if(hidden)e.css({'display':'block','opacity':0});}else if(!parts&&val=="hide"){cleanStart=0;}
if(parts){var end=parseFloat(parts[2]);if(parts[1])end=((parts[1]==="-="?-1:1)*end)+parseInt(cleanStart,10);return end;}else{return cleanStart;}};function _getTranslation(x,y,use3D){return(use3D===true&&has3D)?"translate3d("+x+"px,"+y+"px,0)":"translate("+x+"px,"+y+"px)";};function _applyCSSTransition(e,property,duration,easing,value,isTransform,isTranslatable,use3D){var enhanceData=e.data(DATA_KEY)||jQuery.extend(true,{},defaultEnhanceData),offsetPosition=value,isDirection=jQuery.inArray(property,directions)>-1;if(isDirection){var meta=enhanceData.meta,cleanPropertyValue=_cleanValue(e.css(property))||0,stashedProperty=property+"_o";offsetPosition=isDirection?value-cleanPropertyValue:value;meta[property]=offsetPosition;meta[stashedProperty]=e.css(property)=="auto"?0+offsetPosition:cleanPropertyValue+offsetPosition||0;enhanceData.meta=meta;if(isTranslatable&&offsetPosition===0){offsetPosition=0-meta[stashedProperty];meta[property]=offsetPosition;meta[stashedProperty]=0;}}
return e.data(DATA_KEY,_applyCSSWithPrefix(enhanceData,property,duration,easing,offsetPosition,isTransform,isTranslatable,use3D));};function _applyCSSWithPrefix(cssProperties,property,duration,easing,value,isTransform,isTranslatable,use3D){cssProperties=typeof cssProperties==='undefined'?{}:cssProperties;cssProperties.secondary=typeof cssProperties.secondary==='undefined'?{}:cssProperties.secondary;for(var i=cssPrefixes.length-1;i>=0;i--){if(typeof cssProperties[cssPrefixes[i]+'transition-property']==='undefined')cssProperties[cssPrefixes[i]+'transition-property']='';cssProperties[cssPrefixes[i]+'transition-property']+=', '+((isTransform===true&&isTranslatable===true)?cssPrefixes[i]+'transform':property);cssProperties[cssPrefixes[i]+'transition-duration']=duration+'ms';cssProperties[cssPrefixes[i]+'transition-timing-function']=easing;cssProperties.secondary[((isTransform===true&&isTranslatable===true)?cssPrefixes[i]+'transform':property)]=(isTransform===true&&isTranslatable===true)?_getTranslation(cssProperties.meta.left,cssProperties.meta.top,use3D):value;};return cssProperties;};function _isBoxShortcut(prop){for(var property in prop){if((property=="width"||property=="height")&&(prop[property]=="show"||prop[property]=="hide"||prop[property]=="toggle")){return true;}}
return false;};function _isEmptyObject(obj){for(var i in obj)return false;return true;};function _cleanValue(val){return parseFloat(val.replace(/px/i,''));};function _appropriateProperty(prop,value,element){var is=jQuery.inArray(prop,cssTransitionProperties)>-1;if((prop=='width'||prop=='height')&&(value===parseFloat(element.css(prop))))is=false;return is;};jQuery.fn.translation=function(){if(!this[0]){return null;}
var elem=this[0],cStyle=window.getComputedStyle(elem,null),translation={x:0,y:0};for(var i=cssPrefixes.length-1;i>=0;i--){var transform=cStyle.getPropertyValue(cssPrefixes[i]+"transform");if(transform&&(/matrix/i).test(transform)){var explodedMatrix=transform.replace(/^matrix\(/i,'').split(/, |\)$/g);translation={x:explodedMatrix[4],y:explodedMatrix[5]};break;}}
return translation;};jQuery.fn.animate=function(prop,speed,easing,callback){prop=prop||{};var isTranslatable=!(typeof prop["bottom"]!=="undefined"||typeof prop["right"]!=="undefined"),optall=jQuery.speed(speed,easing,callback),elements=this,callbackQueue=0,propertyCallback=function(){callbackQueue--;if(callbackQueue===0){if(typeof optall.complete==='function'){optall.complete.apply(elements,arguments);}}};if(!cssTransitionsSupported||_isEmptyObject(prop)||_isBoxShortcut(prop)||optall.duration<=0){return originalAnimateMethod.apply(this,arguments);}
return this[optall.queue===false?"each":"queue"](function(){var self=jQuery(this),opt=jQuery.extend({},optall),cssCallback=function(){var reset={};for(var i=cssPrefixes.length-1;i>=0;i--){reset[cssPrefixes[i]+'transition-property']='none';reset[cssPrefixes[i]+'transition-duration']='';reset[cssPrefixes[i]+'transition-timing-function']='';};self.unbind(transitionEndEvent);if(!prop.leaveTransforms===true){var props=self.data(DATA_KEY)||{},restore={};for(i=cssPrefixes.length-1;i>=0;i--){restore[cssPrefixes[i]+'transform']='';}
if(isTranslatable&&typeof props.meta!=='undefined'){for(var j=0,dir;dir=directions[j];++j){restore[dir]=props.meta[dir+"_o"]+"px";}}
self.css(reset).css(restore);}
if(prop.opacity==='hide'){self.css('display','none');}
self.data(DATA_KEY,null);propertyCallback.call(self);},easings={bounce:'cubic-bezier(0.0, 0.35, .5, 1.3)',linear:'linear',swing:'ease-in-out',easeInOutQuint:'cubic-bezier(0.5, 0, 0, 0.8)'},domProperties={},cssEasing=easings[opt.easing||"swing"]?easings[opt.easing||"swing"]:opt.easing||"swing";for(var p in prop){if(jQuery.inArray(p,pluginOptions)===-1){var isDirection=jQuery.inArray(p,directions)>-1,cleanVal=_interpretValue(self,prop[p],p,(isDirection&&prop.avoidTransforms!==true));if(_appropriateProperty(p,cleanVal,self)){_applyCSSTransition(self,p,opt.duration,cssEasing,isDirection&&prop.avoidTransforms===true?cleanVal+"px":cleanVal,isDirection&&prop.avoidTransforms!==true,isTranslatable,prop.useTranslate3d===true);}
else{domProperties[p]=prop[p];}}}
var cssProperties=self.data(DATA_KEY)||{};for(var i=cssPrefixes.length-1;i>=0;i--){if(typeof cssProperties[cssPrefixes[i]+'transition-property']!=='undefined'){cssProperties[cssPrefixes[i]+'transition-property']=cssProperties[cssPrefixes[i]+'transition-property'].substr(2);}}
self.data(DATA_KEY,cssProperties).unbind(transitionEndEvent);if(!_isEmptyObject(self.data(DATA_KEY))&&!_isEmptyObject(self.data(DATA_KEY).secondary)){callbackQueue++;self.css(self.data(DATA_KEY));var secondary=self.data(DATA_KEY).secondary;setTimeout(function(){self.bind(transitionEndEvent,cssCallback).css(secondary);});}
else{opt.queue=false;}
if(!_isEmptyObject(domProperties)){callbackQueue++;originalAnimateMethod.apply(self,[domProperties,{duration:opt.duration,easing:opt.easing,complete:propertyCallback,queue:opt.queue}]);}
return true;});};jQuery.fn.stop=function(clearQueue,gotoEnd,leaveTransforms){if(!cssTransitionsSupported)return originalStopMethod.apply(this,[clearQueue,gotoEnd]);if(clearQueue)this.queue([]);var reset={};for(var i=cssPrefixes.length-1;i>=0;i--){reset[cssPrefixes[i]+'transition-property']='none';reset[cssPrefixes[i]+'transition-duration']='';reset[cssPrefixes[i]+'transition-timing-function']='';};this.each(function(){var self=jQuery(this),cStyle=window.getComputedStyle(this,null),restore={},i;if(!_isEmptyObject(self.data(DATA_KEY))&&!_isEmptyObject(self.data(DATA_KEY).secondary)){var selfCSSData=self.data(DATA_KEY);if(gotoEnd){restore=selfCSSData.secondary;if(!leaveTransforms&&typeof selfCSSData.meta['left_o']!==undefined||typeof selfCSSData.meta['top_o']!==undefined){restore['left']=typeof selfCSSData.meta['left_o']!==undefined?selfCSSData.meta['left_o']:'auto';restore['top']=typeof selfCSSData.meta['top_o']!==undefined?selfCSSData.meta['top_o']:'auto';for(i=cssPrefixes.length-1;i>=0;i--){restore[cssPrefixes[i]+'transform']='';}}}
else{for(var prop in self.data(DATA_KEY).secondary){prop=prop.replace(rupper,"-$1").toLowerCase();restore[prop]=cStyle.getPropertyValue(prop);if(!leaveTransforms&&(/matrix/i).test(restore[prop])){var explodedMatrix=restore[prop].replace(/^matrix\(/i,'').split(/, |\)$/g);restore['left']=explodedMatrix[4]+'px'||'auto';restore['top']=explodedMatrix[5]+'px'||'auto';for(i=cssPrefixes.length-1;i>=0;i--){restore[cssPrefixes[i]+'transform']='';}}}}
self.unbind(transitionEndEvent).css(reset).css(restore).data(DATA_KEY,null);}
else{originalStopMethod.apply(self,[clearQueue,gotoEnd]);}});return this;};})(jQuery,jQuery.fn.animate,jQuery.fn.stop);